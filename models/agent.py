# =============================================================================
# models/agent.py
# =============================================================================
# 目的：
# 此檔案定義了 Agent2Agent (A2A) 系統中與代理相關的資料模型。
# 包含：
# - 代理支援的能力（例如：串流、推播通知）
# - 代理本身的中繼資料（AgentCard）
# - 代理可執行的每個技能的中繼資料（AgentSkill）
#
# 這些類別有助於以結構化且一致的方式描述代理的身份、功能，以及如何與其他代理或客戶端互動。
# =============================================================================

# -----------------------------------------------------------------------------
# 匯入
# -----------------------------------------------------------------------------

# BaseModel 是 Pydantic 的強大基底類別。
# 它會自動驗證並將輸入資料轉換為 Python 型別
from pydantic import BaseModel

# List 型別提示，用於宣告 list 欄位
from typing import List


# -----------------------------------------------------------------------------
# AgentCapabilities
# -----------------------------------------------------------------------------
# 此類別定義代理支援哪些功能或協議。
# 這些能力可供 A2A 客戶端或目錄服務了解如何與代理互動。
class AgentCapabilities(BaseModel):
    # 代理是否能透過串流傳送中間任務結果
    streaming: bool = False

    # 代理是否能透過 HTTP push/webhook 推播更新
    pushNotifications: bool = False

    # 若啟用，代理會追蹤任務狀態轉換的歷史（如 "started", "completed"）
    # 有助於除錯或稽核
    stateTransitionHistory: bool = False


# -----------------------------------------------------------------------------
# AgentSkill
# -----------------------------------------------------------------------------
# 此類別定義代理所提供的單一技能的中繼資料。
# 每個技能對應代理可執行的特定任務型別。
class AgentSkill(BaseModel):
    # 技能的唯一識別碼（如 "get_time"）
    id: str

    # 技能的人類可讀名稱（如 "取得目前時間"）
    name: str

    # 可選的描述，幫助使用者了解技能用途
    description: str | None = None

    # 可選的標籤，有助於分類或搜尋技能（如 ["time", "clock"]）
    tags: List[str] | None = None

    # 可選的範例語句，說明此技能可能回應的查詢
    # 有助於介面建議使用者輸入
    examples: List[str] | None = None

    # 可選的支援輸入模式列表（如 ["text", "json"]）
    inputModes: List[str] | None = None

    # 可選的支援輸出模式列表（如 ["text", "image"]）
    outputModes: List[str] | None = None

# -----------------------------------------------------------------------------
# AgentCard
# -----------------------------------------------------------------------------
# 此類別提供代理的核心中繼資料。
# 這些資訊可與目錄服務或其他代理分享，
# 用於描述代理的功能、聯絡方式及支援的能力。
class AgentCard(BaseModel):
    # 代理的人類可讀名稱（如 "時間小幫手"）
    name: str

    # 代理的用途或使用情境描述
    description: str

    # 代理的主機網址（可用於發送請求）
    url: str

    # 代理的語意版本（如 "1.0.0"）
    version: str

    # 代理支援的能力（使用上方的 AgentCapabilities 模型）
    capabilities: AgentCapabilities

    # 代理可執行的技能列表（為 AgentSkill 物件的列表）
    # 這些是完整 AgentSkill 定義的參考，可能需另行取得
    skills: List[AgentSkill]
